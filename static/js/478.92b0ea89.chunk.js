"use strict";(self.webpackChunkmarvel=self.webpackChunkmarvel||[]).push([[478],{478:(t,e,a)=>{a.r(e),a.d(e,{default:()=>h});var s=a(569),n=a(43),r=a(65),i=a(897),l=a(924),c=a(286),o=a(475),u=a(579);const d=()=>{const[t,e]=(0,n.useState)([]),[a,s]=(0,n.useState)(50),[d,h]=(0,n.useState)(!1),[m,p]=(0,n.useState)(!1),{loading:g,error:b,getAllComics:f}=(0,i.A)();(0,n.useEffect)((()=>j(a)),[]);const j=t=>{f(t).then(x)},x=t=>{let a=!1;t.length<8&&(a=!0),e((e=>[...e,...t])),p((t=>!1)),s((t=>t+8)),h((t=>a))};const $=function(t){const e=t.map(((t,e)=>{let a={objectFit:"cover"};return"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===t.thumbnail&&(a={objectFit:"unset"}),(0,u.jsx)("li",{tabIndex:0,children:(0,u.jsxs)(o.k2,{to:`/comics/${t.id}`,children:[(0,u.jsx)("img",{src:t.thumbnail,alt:t.title,style:a}),(0,u.jsx)("p",{children:t.title}),(0,u.jsx)("span",{children:t.price})]})},e)}));return(0,u.jsx)("ul",{children:e})}(t),v=b?(0,u.jsx)(l.A,{}):null,y=g&&!m?(0,u.jsx)(c.A,{}):null;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("img",{src:r,alt:"comics banner."}),(0,u.jsxs)("div",{className:"comics__choose","data-comics-list":!0,children:[v,y,$,(0,u.jsx)("button",{className:"btn btn--long",disabled:m,style:{display:d?"none":"flex"},onClick:()=>j(a),children:(0,u.jsx)("div",{className:"inner",children:"load more"})})]})]})},h=()=>(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(s.A,{children:(0,u.jsx)(d,{})})})},897:(t,e,a)=>{a.d(e,{A:()=>n});var s=a(43);const n=()=>{const{loading:t,error:e,request:a,clearError:n}=(()=>{const[t,e]=(0,s.useState)(!1),[a,n]=(0,s.useState)(null);return{loading:t,request:(0,s.useCallback)((async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{"Content-Type":"application/json"};e(!0);try{const n=await fetch(t,{method:a,headers:r,body:s});if(!n.ok)throw new Error(`couldnt fetch ${t}, status ${n.status}`);const i=n.json();return e(!1),i}catch(i){throw e(!1),n(i.message),i}}),[]),error:a,clearError:(0,s.useCallback)((()=>n(null)),[])}})(),r="https://gateway.marvel.com:443/v1/public/",i="apikey=ff64a0784b5d6e42a6564ae4ba4b8975",l=t=>({id:t.id,name:t.name,description:t.description||"unfortunatly, this hero still hasnt his own description...",thumbnail:t.thumbnail.path+"."+t.thumbnail.extension||"",homepage:t.urls[0].url,wiki:t.urls[1].url,comics:t.comics.items.slice(0,10)}),c=t=>({id:t.id,title:t.title,thumbnail:t.thumbnail.path+"."+t.thumbnail.extension,price:t.prices.price?`${t.prices[0].price}$`:"not available",language:t.textObjects.language||"en-us",pageCount:t.pageCount?`${t.pageCount} p.`:"No info",description:t.description||"No info"});return{loading:t,error:e,getCharacter:async t=>{const e=await a(`${r}characters/${t}?${i}`);return l(e.data.results[0])},getAllCharacters:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:210;return(await a(`${r}characters?limit=9&offset=${t}&${i}`)).data.results.map(l)},clearError:n,getAllComics:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return(await a(`${r}comics?&limit=8&offset=${t}&${i}`)).data.results.map(c)},getComicsId:async t=>{const e=await a(`${r}comics/${t}?${i}`);return c(e.data.results[0])},getCharacterByName:async t=>{const e=await a(`${r}characters?name=${t}&${i}`);return l(e.data.results[0])}}}},65:(t,e,a)=>{t.exports=a.p+"static/media/banner.cf3bbfbcc6eea4c7badd.jpg"}}]);
//# sourceMappingURL=478.92b0ea89.chunk.js.map