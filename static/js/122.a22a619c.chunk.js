"use strict";(self.webpackChunkmarvel=self.webpackChunkmarvel||[]).push([[122],{122:(e,s,t)=>{t.r(s),t.d(s,{default:()=>v});var a=t(43),r=t(569),n=t(772),l=t(523),i=t(924),c=t(286),o=t(897),h=t(579);const d=e=>{const[s,t]=(0,a.useState)([]),[r,d]=(0,a.useState)(!1),[m,u]=(0,a.useState)(210),[j,x]=(0,a.useState)(!1),{loading:b,error:g,getAllCharacters:_}=(0,o.A)(),p=(0,a.useRef)([]);(0,a.useEffect)((()=>{f(m,!0)}),[]);const f=(e,s)=>{d(!s),_(e).then(v)},v=e=>{let s=!1;e.length<9&&(s=!0),t((s=>[...s,...e])),d(!1),u((e=>e+9)),x(s)},N=e=>{p.current.forEach((e=>{e&&e.classList.remove("char__item_selected")})),p.current[e]&&(p.current[e].classList.add("char__item_selected"),p.current[e].focus())};const y=function(s){const t=s.map(((s,t)=>{let a={objectFit:"cover"};return"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===s.thumbnail&&(a={objectFit:"unset"}),(0,h.jsx)(n.A,{timeout:300,classNames:"hero",children:(0,h.jsxs)("li",{ref:e=>{p.current[t]=e},className:"char__item",tabIndex:0,onClick:()=>{e.onHeroSelected(s.id),N(t)},onKeyPress:a=>{" "!==a.key&&"Enter"!==a.key||(e.onHeroSelected(s.id),N(t))},children:[(0,h.jsx)("img",{src:s.thumbnail,alt:s.name,style:a}),(0,h.jsx)("div",{className:"char__name",children:s.name})]})},s.id)}));return(0,h.jsx)(l.A,{component:"ul",className:"char__grid",children:t})}(s),k=g?(0,h.jsx)(i.A,{}):null,$=b&&!r?(0,h.jsx)(c.A,{}):null;return(0,h.jsxs)("div",{className:"char__list",children:[k,$,y,(0,h.jsx)("button",{className:"btn btn--long",disabled:r,style:{display:j?"none":"flex"},onClick:()=>f(m),children:(0,h.jsx)("div",{className:"inner",children:"load more"})})]})},m=e=>{let{hero:s}=e;if(!s)return null;const{name:t,description:a,thumbnail:r,homepage:n,wiki:l}=s,i=r.includes("not_available");return(0,h.jsxs)("div",{className:"intro__random",children:[(0,h.jsx)("img",{src:r,width:"180",height:"180",alt:"hero",className:i?"not-available":"","data-hero-image":!0}),(0,h.jsxs)("div",{className:"intro__descr",children:[(0,h.jsx)("h2",{"data-hero-name":!0,children:t}),(0,h.jsx)("p",{"data-hero-text":!0,children:a}),(0,h.jsxs)("div",{className:"intro__buttons",children:[(0,h.jsx)("a",{href:n,className:"btn btn-red",children:"Homepage"}),(0,h.jsx)("a",{href:l,className:"btn btn--grey",children:"Wiki"})]})]})]})},u=()=>{const[e,s]=(0,a.useState)(null),{loading:t,error:r,getCharacter:n,clearError:l}=(0,o.A)();(0,a.useEffect)((()=>u()),[]);const d=e=>{s(e)},u=()=>{l();const e=Math.floor(400*Math.random()+1011e3);n(e).then(d)},j=r?(0,h.jsx)(i.A,{}):null,x=t?(0,h.jsx)(c.A,{}):null,b=t||r?null:(0,h.jsx)(m,{hero:e});return(0,h.jsxs)("section",{className:"intro",children:[j,x,b,(0,h.jsxs)("div",{className:"intro__static",children:[(0,h.jsxs)("p",{children:["Random character for today!",(0,h.jsx)("br",{}),"Do you want to get to know him better?"]}),(0,h.jsx)("p",{children:"Or choose another one"}),(0,h.jsx)("a",{href:"#",className:"btn btn-red",onClick:()=>u(),children:"Try it"})]})]})},j=()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("h2",{className:"heroes__select",children:"Please select a character to see information"}),(0,h.jsxs)("div",{className:"skeleton",children:[(0,h.jsxs)("div",{className:"pulse skeleton__header",children:[(0,h.jsx)("div",{className:"pulse skeleton__circle"}),(0,h.jsx)("div",{className:"pulse skeleton__mini"})]}),(0,h.jsx)("div",{className:"pulse skeleton__block"}),(0,h.jsx)("div",{className:"pulse skeleton__block"}),(0,h.jsx)("div",{className:"pulse skeleton__block"})]})]});var x=t(475);const b=e=>{let{hero:s}=e;const{name:t,description:a,thumbnail:r,homepage:n,wiki:l,comics:i}=s;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"heroes__top",children:[(0,h.jsx)("img",{src:r,width:150,height:150,alt:t}),(0,h.jsxs)("div",{className:"hero__buttons",children:[(0,h.jsx)("h3",{children:t}),(0,h.jsx)("a",{href:n,className:"btn btn-red",children:"Homepage"}),(0,h.jsx)("a",{href:l,className:"btn btn--grey",children:"Wiki"})]})]}),(0,h.jsx)("p",{children:a}),(0,h.jsx)("h4",{children:"Comics:"}),(0,h.jsx)("ul",{children:0===i.length?(0,h.jsx)("p",{children:"Unfortunately, we don't have data"}):i.map(((e,s)=>(0,h.jsx)(x.k2,{to:`/comics/${e.resourceURI.match(/\d+$/)[0]}`,children:e.name},s)))})]})},g=e=>{const[s,t]=(0,a.useState)(null),{loading:r,error:n,getCharacter:l,clearError:d}=(0,o.A)();(0,a.useEffect)((()=>{u()}),[e.heroId]);const m=e=>{t(e)},u=()=>{d(),e.heroId&&l(e.heroId).then(m)},x=s||r||n?null:(0,h.jsx)(j,{}),g=n?(0,h.jsx)(i.A,{}):null,_=r?(0,h.jsx)(c.A,{}):null,p=r||n||!s?null:(0,h.jsx)(b,{hero:s});return(0,h.jsxs)("div",{className:"heroes__info",children:[x,g,_,p]})};var _=t(892),p=t(899);const f=()=>{const{getCharacterByName:e}=(0,o.A)(),[s,t]=(0,a.useState)(""),[r,n]=(0,a.useState)(""),[l,i]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),[m,u]=(0,a.useState)("");return(0,a.useEffect)((()=>{""===m&&(t(""),i(""),n(""),d(!1))}),[m]),(0,h.jsx)("div",{className:"heroes__info",children:(0,h.jsx)(_.l1,{initialValues:{name:""},validationSchema:p.Ik({name:p.Yj().min(2,"minimum 2 symbols").required("This field is required")}),onSubmit:(s,a)=>{let{setSubmitting:r}=a;return e(s.name).then((e=>{e?(t(`There is! Visit ${s.name} page?`),i("confirmed"),n(e.id),d(!0)):(t("The character was not found. Check the name and try again."),i(""),n(""),d(!1))})).catch((()=>{t("An error occurred. Please try again later.")})).finally((()=>{r(!1)}))},children:e=>{let{isSubmitting:t,handleChange:a,values:n}=e;return(0,h.jsxs)(_.lV,{className:"heroes__form",children:[(0,h.jsx)("h2",{className:"heroes__search",children:"Or find a character by name:"}),(0,h.jsxs)("div",{className:"heroes__search-field",children:[(0,h.jsx)("label",{htmlFor:"name",children:(0,h.jsx)(_.D0,{id:"name",name:"name",type:"text",placeholder:"Enter name",value:n.name,onChange:e=>{a(e),u(e.target.value)}})}),(0,h.jsx)("button",{className:"btn btn-red",type:"submit",disabled:t,children:"Find"})]}),(0,h.jsxs)("div",{className:"heroes__search-bottom",children:[s&&(0,h.jsx)("div",{className:`heroes__error ${l}`,children:s}),(0,h.jsx)(_.Kw,{className:"heroes__error",name:"name",component:"div"}),c?(0,h.jsx)(x.k2,{className:"btn btn--grey",to:`/hero/${r}`,children:"To Page"}):null]})]})}})})},v=()=>{const[e,s]=(0,a.useState)(null);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r.A,{children:(0,h.jsx)(u,{})}),(0,h.jsxs)("section",{className:"heroes",children:[(0,h.jsx)(r.A,{children:(0,h.jsx)(d,{onHeroSelected:e=>{s(e)}})}),(0,h.jsx)(r.A,{children:(0,h.jsxs)("div",{className:"heroes__side",children:[(0,h.jsx)(g,{heroId:e}),(0,h.jsx)(f,{})]})})]})]})}},897:(e,s,t)=>{t.d(s,{A:()=>r});var a=t(43);const r=()=>{const{loading:e,error:s,request:t,clearError:r}=(()=>{const[e,s]=(0,a.useState)(!1),[t,r]=(0,a.useState)(null);return{loading:e,request:(0,a.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{"Content-Type":"application/json"};s(!0);try{const r=await fetch(e,{method:t,headers:n,body:a});if(!r.ok)throw new Error(`couldnt fetch ${e}, status ${r.status}`);const l=r.json();return s(!1),l}catch(l){throw s(!1),r(l.message),l}}),[]),error:t,clearError:(0,a.useCallback)((()=>r(null)),[])}})(),n="https://gateway.marvel.com:443/v1/public/",l="apikey=ff64a0784b5d6e42a6564ae4ba4b8975",i=e=>({id:e.id,name:e.name,description:e.description||"unfortunatly, this hero still hasnt his own description...",thumbnail:e.thumbnail.path+"."+e.thumbnail.extension||"",homepage:e.urls[0].url,wiki:e.urls[1].url,comics:e.comics.items.slice(0,10)}),c=e=>({id:e.id,title:e.title,thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,price:e.prices.price?`${e.prices[0].price}$`:"not available",language:e.textObjects.language||"en-us",pageCount:e.pageCount?`${e.pageCount} p.`:"No info",description:e.description||"No info"});return{loading:e,error:s,getCharacter:async e=>{const s=await t(`${n}characters/${e}?${l}`);return i(s.data.results[0])},getAllCharacters:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:210;return(await t(`${n}characters?limit=9&offset=${e}&${l}`)).data.results.map(i)},clearError:r,getAllComics:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return(await t(`${n}comics?&limit=8&offset=${e}&${l}`)).data.results.map(c)},getComicsId:async e=>{const s=await t(`${n}comics/${e}?${l}`);return c(s.data.results[0])},getCharacterByName:async e=>{const s=await t(`${n}characters?name=${e}&${l}`);return i(s.data.results[0])}}}}}]);
//# sourceMappingURL=122.a22a619c.chunk.js.map